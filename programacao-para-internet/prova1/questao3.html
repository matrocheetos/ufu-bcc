<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    <title>11921BCC027</title>
</head>

<body>
    <main>
        <form name="formVeiculo" action="cadastraVeiculo.php" method="post" enctype="multipart/form-data">
            <div class="container">

                <div class="row">
                    <div class="col-4">
                        <label for="marca" class="form-label">Marca:</label>
                        <input type="text" id="marca" name="marca" class="form-control">
                        <span></span>
                    </div>
                    <div class="col-8">
                        <label for="modelo" class="form-label">Modelo:</label>
                        <input type="text" id="modelo" name="modelo" class="form-control">
                        <span></span>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label for="cor" class="form-label">Cor:</label>
                        <input type="text" id="cor" name="cor" class="form-control">
                    </div>
                    <div class="col">
                        <label for="data" class="form-label">Data de fabricação:</label>
                        <input type="date" id="data" name="data" class="form-control">
                    </div>
                    <div class="col">
                        <label for="tipo" class="form-label">Tipo:</label>
                        <select class="form-select" id="tipo" name="tipo">
                            <option value="">-</option>
                            <option value="automovel">Automóvel</option>
                            <option value="caminhonete">Caminhonete</option>
                            <option value="caminhao">Caminhão</option>
                        </select>
                    </div>
                </div>

                <div>
                    <fieldset>
                        <legend>Opcionais</legend>
                        <div class="form-check">
                            <input type="checkbox" id="ar-condicionado" name="opcionais[]" value="ar-condicionado"
                                class="form-check-input">
                            <label for="ar-condicionado" class="form-check-label">Ar-condicionado</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" id="central-multimidia" name="opcionais[]" value="central-multimidia"
                                class="form-check-input">
                            <label for="central-multimidia" class="form-check-label">Central multimídia</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" id="gps" name="opcionais[]" value="gps" class="form-check-input">
                            <label for="gps" class="form-check-label">GPS</label>
                        </div>
                    </fieldset>
                </div>

                <div>
                    <label for="descricao" class="form-label">Descrição:</label>
                    <textarea id="descricao" name="descricao" rows="3" cols="10" class="form-control"></textarea>
                </div>

                <div>
                    <label for="foto" class="form-label">Foto:</label>
                    <input id="foto" name="foto" type="file" accept="image/*" class="form-control">
                </div>

                <div>
                    <label for="novo-campo" class="form-label">Novo tipo de veículo:</label>
                    <input type="text" id="novo-campo" name="novo-campo" class="form-control">
                    <span></span>
                </div>

                <button class="btn btn-primary">Enviar</button>
                <button id="novo-veiculo" class="btn btn-secondary">Adicionar novo campo</button>
            </div>


        </form>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

    <script>
        window.onload = function () {
            document.forms.formVeiculo.onsubmit = validaForm;

            const botaoAdd = document.getElementById("novo-veiculo");
            botaoAdd.addEventListener("click", adicionaVeiculo);
        }

        function validaForm(e) {
            let form = e.target;
            let formValido = true;

            const spanMarca = form.marca.nextElementSibling;
            const spanModelo = form.modelo.nextElementSibling;

            spanMarca.textContent = "";
            spanModelo.textContent = "";

            if (form.marca.value < 4) {
                spanMarca.textContent = "Marca deve ter 4 caracteres ou mais";
                formValido = false;
            }
            if (form.modelo.value < 4) {
                spanModelo.textContent = "Modelo deve ter 4 caracteres ou mais";
                formValido = false;
            }

            if (!formValido) e.preventDefault();
        }

        function adicionaVeiculo() {
            const campoTipo = document.getElementById("novo-campo");
            const selectTipo = document.querySelector("select");

            const novaOption = document.createElement("option");
            novaOption.textContent = campoTipo.value;
            selectTipo.appendChild(novaOption);
            campoTipo.value = "";
        }
    </script>
</body>

</html>